#include <stdio.h>
#include <string.h> // Required for strlen() and strcspn()
#include <stdlib.h> // Required for general C standards

int main()
{
    // Corrected: Declared as a character array
    char str[100]; 
    int state = 0; // State 0 = even number of b's (not accepted)
    int i;
    
    printf("Enter a string of a's and b's: ");
    
    // Corrected: Using safer fgets() instead of gets()
    if (fgets(str, sizeof(str), stdin) == NULL) {
        return 1; // Exit if input fails
    }
    
    // Remove the newline character added by fgets()
    str[strcspn(str, "\n")] = '\0';
    
    for (i = 0; i < strlen(str); i++)
    {
        if (str[i] == 'a')
        {
            continue; // 'a' does not change the state (parity of 'b' count)
        }
        else if (str[i] == 'b'){
            // Toggle the state: 0 -> 1, 1 -> 0
            state = 1 - state; 
        }
        else{
            printf("Invalid character: %c\n", str[i]);
            // Breaking the loop on invalid input
            state = 0; // Ensure rejection if invalid
            break; 
        }
    }
    
    // Final state 1 means an odd number of 'b's were found
    if (state == 1){
        printf("String accepted\n");
    }
    else{
        printf("String is not accepted\n");
    }
    
    return 0;
}
